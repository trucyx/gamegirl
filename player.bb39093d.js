!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.player=e():t.player=e()}(window,function(){return function(t){function e(e){for(var n,c,o=e[0],u=e[1],s=e[2],h=0,f=[];h<o.length;h++)c=o[h],i[c]&&f.push(i[c][0]),i[c]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);for(l&&l(e);f.length;)f.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,o=1;o<r.length;o++){var u=r[o];0!==i[u]&&(n=!1)}n&&(a.splice(e--,1),t=c(c.s=r[0]))}return t}var n={},i={0:0},a=[];function c(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.m=t,c.c=n,c.d=function(t,e,r){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(r,n,function(e){return t[e]}.bind(null,n));return r},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="";var o=window.webpackJsonp_name_=window.webpackJsonp_name_||[],u=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var l=u;return a.push([174,1]),r()}({1:function(t,e,r){"use strict";r.d(e,"e",function(){return n}),r.d(e,"b",function(){return i}),r.d(e,"o",function(){return a}),r.d(e,"p",function(){return c}),r.d(e,"n",function(){return o}),r.d(e,"d",function(){return u}),r.d(e,"f",function(){return s}),r.d(e,"m",function(){return l}),r.d(e,"l",function(){return h}),r.d(e,"k",function(){return f}),r.d(e,"g",function(){return d}),r.d(e,"h",function(){return p}),r.d(e,"a",function(){return v}),r.d(e,"i",function(){return y}),r.d(e,"j",function(){return m}),r.d(e,"r",function(){return b}),r.d(e,"q",function(){return E}),r.d(e,"c",function(){return B});var n=65280,i=65284,a=65285,c=65286,o=65287,u=65295,s=65344,l=65345,h=65346,f=65347,d=65348,p=65349,v=65351,y=65352,m=65353,b=65354,E=65355,B=65535},128:function(t,e,r){"use strict";(function(t){r.d(e,"a",function(){return c});r(21),r(53),r(17),r(8),r(9),r(18),r(54),r(55),r(56),r(57),r(58),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(69),r(70),r(71),r(72),r(73),r(74),r(75),r(76),r(77);var n=r(1);function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_bios",void 0),a(this,"_biosDisabled",void 0),a(this,"video",void 0),a(this,"timer",void 0),a(this,"lcd",void 0),a(this,"gpu",void 0),a(this,"joypad",void 0),a(this,"cartridge",void 0),a(this,"_wram",void 0),a(this,"_io",void 0),a(this,"_zram",void 0),a(this,"if",void 0),a(this,"ie",void 0),this._bios=new Uint8Array(t),this._biosDisabled=0==this._bios.length,this.video=null,this.timer=null,this.lcd=null,this.gpu=null,this.joypad=null,this._wram=new Uint8Array(8192),this._io=new Uint8Array(128),this._zram=new Uint8Array(127),this.cartridge=null,this.if=0,this.ie=0}var r,c,o;return r=e,(c=[{key:"init",value:function(){this._biosDisabled=0==this._bios.length,this.if=0,this.ie=0}},{key:"loadCartridge",value:function(t){this.cartridge=t}},{key:"readByte",value:function(t){switch((t&=65535)>>12){case 0:if(!this._biosDisabled&&t<256)return this._bios[t];case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 10:case 11:return this.cartridge.readByte(t);case 8:case 9:return this.video.readByte(t);case 12:case 13:return this._wram[8191&t];case 14:case 15:if(t==n.c)return this.ie;if(t==n.d)return this.if;if(t>65407)return this._zram[127&t];if(t>65279){switch(255&t){case 0:return this.joypad.readByte(t);case 4:case 5:case 6:case 7:return this.timer.readByte(t);case 64:case 66:case 67:case 71:case 72:case 73:case 74:case 75:return this.gpu.readByte(t);case 65:case 68:case 69:return this.lcd.readByte(t)}return this._io[255&t]}return t>65183?0:t>65023?this.video.readByte(t):this._wram[8191&t]}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"readWord",value:function(t){return this.readByte(t)|this.readByte(t+1)<<8}},{key:"writeByte",value:function(e,r){if(e&=65535,r&=255,t&&t.env.TEST_ROM&&65282==e&&129==r){var i=String.fromCharCode(this.readByte(65281));t.stdout.write(i)}switch(e>>12){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 10:case 11:return this.cartridge.writeByte(e,r);case 8:case 9:return this.video.writeByte(e,r);case 12:case 13:return this._wram[8191&e]=r;case 14:case 15:if(e==n.c)return this.ie=r;if(e==n.d)return this.if=r;if(e>65407)return this._zram[127&e]=r;if(e>65279){switch(255&e){case 0:return this.joypad.writeByte(e,r);case 4:case 5:case 6:case 7:return this.timer.writeByte(e,r);case 64:case 66:case 67:case 71:case 72:case 73:case 74:case 75:return this.gpu.writeByte(e,r);case 65:case 68:case 69:return this.lcd.writeByte(e,r);case 70:this.video.transfer(this,r);break;case 80:this._biosDisabled=!0}return this._io[255&e]=r}if(e>65183)return;return e>65023?this.video.writeByte(e,r):this._wram[8191&e]=r}throw new Error("unmapped address 0x".concat(e.toString(16)))}},{key:"writeWord",value:function(t,e){this.writeByte(t,e),this.writeByte(t+1,e>>8)}}])&&i(r.prototype,c),o&&i(r,o),e}()}).call(this,r(92))},174:function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n),a=r(100),c=r.n(a);r(25),r(32),r(33),r(21),r(89),r(8),r(90),r(91),r(9),r(34),r(35),r(176);function o(){return i.a.createElement("header",{className:"p_v"},i.a.createElement("h1",{className:"p_4"},"what"))}var u=r(19),s=r.n(u),l=r(80),h=r.n(l);r(52),r(53),r(17),r(18),r(54),r(55),r(56),r(57),r(58),r(59),r(60),r(61),r(62),r(63),r(64),r(65),r(66),r(67),r(68),r(69),r(70),r(71),r(72),r(73),r(74),r(75),r(76),r(77);function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,"_ram",void 0),d(this,"_oam",void 0),d(this,"backgroundMap",void 0),d(this,"tiles",void 0),d(this,"sprites",void 0),this._ram=new Uint8Array(8192),this._oam=new Uint8Array(160),this.backgroundMap=[new Array(1024).fill(0),new Array(1024).fill(0)],this.tiles=this.initTiles(1024),this.sprites=this.initSprites(40)}var e,r,n;return e=t,(r=[{key:"transfer",value:function(t,e){for(var r=(255&e)<<8,n=r;n<r+160;n++){var i=t.readByte(n),a=255&n;this.sprites[a>>2][3&a]=i,this._oam[a]=i}}},{key:"readByte",value:function(t){switch(t>>12){case 8:case 9:return this._ram[8191&t];case 15:if(t>65183)break;if(t>65023)return this._oam[255&t]}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){switch(t>>12){case 8:case 9:if(t>38911)this.backgroundMap[t>>10&1][1023&t]=e;else{var r=8191&t,n=this.sumBytes(this._ram[r-1],e);this.tiles[r>>4][r>>1&7]=n}return this._ram[8191&t]=e;case 15:if(t>65183)break;if(t>65023){var i=255&t;return this.sprites[i>>2][3&i]=e,this._oam[i]=e}}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"initTiles",value:function(t){for(var e=[],r=0;r<t;r++)e[r]=[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];return e}},{key:"initSprites",value:function(t){for(var e=[],r=0;r<t;r++)e[r]=[0,0,0,0];return e}},{key:"sumBytes",value:function(t,e){for(var r=[],n=7;n>-1;n--){var i=t>>n&1|(e>>n&1)<<1;r[7-n]=i}return r}}])&&f(e.prototype,r),n&&f(e,n),t}(),v=r(1);function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=16384,E=[];E[0]=4096,E[1]=262144,E[2]=65536,E[3]=16384;var B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),m(this,"interrupt",void 0),m(this,"_div",void 0),m(this,"_tima",void 0),m(this,"_tma",void 0),m(this,"_tac",void 0),m(this,"_divider",void 0),m(this,"_t",void 0),this._div=0,this._tima=0,this._tma=0,this._tac=0,this._divider=b,this._t=E[0]}var e,r,n;return e=t,(r=[{key:"init",value:function(){this._div=0,this._tima=0,this._tma=0,this._tac=0,this._divider=b,this._t=E[0]}},{key:"step",value:function(t){this._divider-=t,this._divider<=0&&(this._div=255&++this._div,this._divider+=b),0!=(4&this._tac)&&(this._t-=t,this._t>0||(this._tima=255&++this._tima,0==this._tima&&(this._tima=this._tma,this.interrupt.setTimerInterrupt()),this._t+=E[3&this._tac]))}},{key:"readByte",value:function(t){switch(t){case v.b:return this._div;case v.o:return this._tima;case v.p:return this._tma;case v.n:return this._tac}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){switch(t){case v.b:return this._div=0;case v.o:return this._tima=e;case v.p:return this._tma=e;case v.n:return this._tac=e}throw new Error("unmapped address 0x".concat(t.toString(16)))}}])&&y(e.prototype,r),n&&y(e,n),t}();function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,"gpu",void 0),w(this,"interrupt",void 0),w(this,"stat",void 0),w(this,"ly",void 0),w(this,"lyc",void 0),w(this,"timer",void 0),this.gpu=e,this.stat=0,this.ly=0,this.lyc=0,this.timer=0}var e,r,n;return e=t,(r=[{key:"init",value:function(){this.stat=0,this.ly=0,this.lyc=0,this.timer=0}},{key:"step",value:function(t){switch(this.timer+=t,3&this.stat){case 2:this.timer>=80&&(this.timer-=80,this.changeMode(3));break;case 3:this.timer>=172&&(this.timer-=172,this.changeMode(0),this.gpu.drawLine(this.ly));break;case 0:this.timer>=204&&(this.timer-=204,this.ly++,this.checkCoincidence(),144==this.ly?(this.changeMode(1),this.interrupt.setVBlankInterrupt(),this.gpu.render()):this.changeMode(2));break;case 1:this.timer>=456&&(this.timer-=456,this.ly++,this.ly>153&&(this.ly=0,this.changeMode(2)),this.checkCoincidence())}}},{key:"readByte",value:function(t){switch(t){case v.m:return this.stat;case v.g:return this.ly;case v.h:return this.lyc}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){switch(t){case v.m:return this.stat=-121&this.stat|248&e;case v.g:return this.ly=0;case v.h:return this.lyc=e}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"changeMode",value:function(t){var e=!1;switch(t){case 0:8&this.stat&&(e=!0);break;case 1:16&this.stat&&(e=!0);break;case 2:32&this.stat&&(e=!0)}e&&this.interrupt.setLcdStatusInterrupt(),this.stat=-4&this.stat|t}},{key:"checkCoincidence",value:function(){this.lyc==this.ly?(this.stat|=4,64&this.stat&&this.interrupt.setLcdStatusInterrupt()):this.stat&=-5}}])&&_(e.prototype,r),n&&_(e,n),t}(),L=r(128);r(157),r(79);function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function D(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),D(this,"width",void 0),D(this,"height",void 0),D(this,"canvas",void 0),D(this,"context2d",void 0),D(this,"image",void 0),D(this,"imageData",void 0),this.width=e,this.height=r,this.canvas=function(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}(e,r),this.context2d=this.canvas.getContext("2d"),this.image=this.context2d.getImageData(0,0,e,r),this.imageData=this.image.data,console.log(this.context2d,this.image,this.imageData)}var e,r,n;return e=t,(r=[{key:"render",value:function(){this.context2d.putImageData(this.image,0,0),this.context2d.drawImage(this.canvas,0,0)}},{key:"clear",value:function(){this.context2d.clearRect(0,0,this.width,this.height)}},{key:"wrtie",value:function(t,e){return this.imageData[t]=e,this.imageData}},{key:"read",value:function(t){return this.imageData[t]}}])&&S(e.prototype,r),n&&S(e,n),t}();r(158);function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}Number.prototype.signed=function(){return 128&this?-(1+(255&~this)):this};var k=[];k[0]=[255,255,255],k[1]=[192,192,192],k[2]=[96,96,96],k[3]=[0,0,0];var T=160,H=144,I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),R(this,"video",void 0),R(this,"canvas",void 0),R(this,"_lcdc",void 0),R(this,"_scy",void 0),R(this,"_scx",void 0),R(this,"_wy",void 0),R(this,"_wx",void 0),R(this,"_bgp",void 0),R(this,"_obp0",void 0),R(this,"_obp1",void 0),R(this,"backgroundPalette",void 0),R(this,"objectPalette",void 0),this.video=e,this._lcdc=0,this._scy=0,this._scx=0,this._wy=0,this._wx=0,this._bgp=0,this._obp0=0,this._obp1=0,this.backgroundPalette=null,this.objectPalette=[],this.canvas=new A(T,H)}var e,r,n;return e=t,(r=[{key:"readByte",value:function(t){switch(t){case v.f:return this._lcdc;case v.l:return this._scy;case v.k:return this._scx;case v.a:return this._bgp;case v.i:return this._obp0;case v.j:return this._obp1;case v.r:return this._wy;case v.q:return this._wx}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){switch(t){case v.f:return this._lcdc=e;case v.l:return this._scy=e;case v.k:return this._scx=e;case v.a:return this.backgroundPalette=this.createPalette(e),this._bgp=e;case v.i:return this.objectPalette[0]=this.createPalette(e),this._obp0=e;case v.j:return this.objectPalette[1]=this.createPalette(e),this._obp1=e;case v.r:return this._wy=e;case v.q:return this._wx=e}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"drawLine",value:function(t){var e=this._lcdc>>4&1;if(1&this._lcdc){var r=this._lcdc>>3&1;this.drawBackground(t,this._scx,this._scy,r,e)}if(32&this._lcdc&&t>=this._wy){var n=this._lcdc>>6&1;this.drawWindow(t,this._wx-7,this._wy,n,e)}2&this._lcdc&&this.drawSprites(t)}},{key:"render",value:function(){128&this._lcdc?this.canvas.render():this.canvas.clear(),this.frame(this.canvas.canvas)}},{key:"frame",value:function(t){}},{key:"createPalette",value:function(t){return[k[3&t],k[t>>2&3],k[t>>4&3],k[t>>6&3]]}},{key:"drawToCanvas",value:function(t,e){this.canvas.wrtie(t,e[0]),this.canvas.wrtie(++t,e[1]),this.canvas.wrtie(++t,e[2]),this.canvas.wrtie(++t,255)}},{key:"drawBackground",value:function(t,e,r,n,i){for(var a=this.video.backgroundMap[n],c=r+t,o=0;o<T;o++){var u=e+o,s=a[32*((255&c)>>3)+((255&u)>>3)],l=this.video.tiles[i?s:256+s.signed()],h=this.backgroundPalette[l[7&c][7&u]],f=4*(t*T+o);this.drawToCanvas(f,h)}}},{key:"drawWindow",value:function(t,e,r,n,i){for(var a=this.video.backgroundMap[n],c=t-r,o=e;o<T;o++){var u=o-e,s=a[32*(c>>3)+(u>>3)],l=this.video.tiles[i?s:256+s.signed()],h=this.backgroundPalette[l[7&c][7&u]],f=4*(t*T+o);this.drawToCanvas(f,h)}}},{key:"drawSprites",value:function(t){for(var e=4&this._lcdc?16:8,r=this.video.sprites.filter(function(r){var n=r[0]-16;return t>=n&&t<n+e}).filter(function(t){return t[1]-8<T}).slice(0,10),n=r.length-1;n>-1;n--)for(var i=r[n],a=i[3],c=this.objectPalette[a>>4&1],o=a>>7&1,u=a>>6&1,s=a>>5&1,l=i[0]-16,h=i[1]-8,f=4&this._lcdc?254&i[2]:i[2],d=u?e-1-(t-l):t-l,p=h;p<h+8&&p<T;p++)if(!(p<0)){var v=4*(t*T+p),y=this.video.tiles[f+(d>>3&1)][7&d][s?7-(p-h):p-h];if(0!=y&&(!o||this.canvas.read(v)==this.backgroundPalette[0][0]||this.canvas.read(v+1)==this.backgroundPalette[0][1]||this.canvas.read(v+2)==this.backgroundPalette[0][2])){var m=c[y];this.drawToCanvas(v,m)}}}}])&&C(e.prototype,r),n&&C(e,n),t}(),P=(r(97),r(127),128),j=64,O=32,N=16;var Y=new Array(255).fill([null,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,r){var n=r.readByte(e.pc),i="".concat(t.toString(16)).concat(n.toString(16)),a=e.pc.toString(16);throw new Error("unknown opcode 0x".concat(i,"; $").concat(a))}}(203)]);function x(t,e){var r=e<<4|e>>4;return t.f=0,0==(255&r)&&(t.f|=P),r}var M=function(t){return function(e){return e[t]=x(e,e[t]),e.pc+=2,8}};function W(t,e){var r=e<<1|e>>7;return t.f=0,0==(255&r)&&(t.f|=P),0!=(128&e)&&(t.f|=N),r}Y[48]=["SWAP B",M("b")],Y[49]=["SWAP C",M("c")],Y[50]=["SWAP D",M("d")],Y[51]=["SWAP E",M("e")],Y[52]=["SWAP H",M("h")],Y[53]=["SWAP L",M("l")],Y[55]=["SWAP A",M("a")],Y[54]=["SWAP (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,x(t,r)),t.pc+=2,16}];var F=function(t){return function(e){return e[t]=W(e,e[t]),e.pc+=2,8}};function U(t,e){var r=e>>1|e<<7;return t.f=0,0==(255&r)&&(t.f|=P),0!=(1&e)&&(t.f|=N),r}Y[0]=["RLC B",F("b")],Y[1]=["RLC C",F("c")],Y[2]=["RLC D",F("d")],Y[3]=["RLC E",F("e")],Y[4]=["RLC H",F("h")],Y[5]=["RLC L",F("l")],Y[6]=["RLC (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,W(t,r)),t.pc+=2,16}],Y[7]=["RLC A",F("a")];var J=function(t){return function(e){return e[t]=U(e,e[t]),e.pc+=2,8}};function q(t,e){var r=e<<1|t.f>>4&1;return t.f=0,0==(255&r)&&(t.f|=P),0!=(128&e)&&(t.f|=N),r}Y[8]=["RRC B",J("b")],Y[9]=["RRC C",J("c")],Y[10]=["RRC D",J("d")],Y[11]=["RRC E",J("e")],Y[12]=["RRC H",J("h")],Y[13]=["RRC L",J("l")],Y[14]=["RRC (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,U(t,r)),t.pc+=2,16}],Y[15]=["RRC A",J("a")];var z=function(t){return function(e){return e[t]=q(e,e[t]),e.pc+=2,8}};function X(t,e){var r=(t.f>>4&1)<<7|e>>1;return t.f=0,0==(255&r)&&(t.f|=P),0!=(1&e)&&(t.f|=N),r}Y[16]=["RL B",z("b")],Y[17]=["RL C",z("c")],Y[18]=["RL D",z("d")],Y[19]=["RL E",z("e")],Y[20]=["RL H",z("h")],Y[21]=["RL L",z("l")],Y[23]=["RL A",z("a")],Y[22]=["RL (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,q(t,r)),t.pc+=2,16}];var Z=function(t){return function(e){return e[t]=X(e,e[t]),e.pc+=2,8}};function $(t,e){var r=e<<1;return t.f=0,0==(255&r)&&(t.f|=P),0!=(128&e)&&(t.f|=N),r}Y[24]=["RR B",Z("b")],Y[25]=["RR C",Z("c")],Y[26]=["RR D",Z("d")],Y[27]=["RR E",Z("e")],Y[28]=["RR H",Z("h")],Y[29]=["RR L",Z("l")],Y[31]=["RR A",Z("a")],Y[30]=["RR (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,X(t,r)),t.pc+=2,16}];var K=function(t){return function(e){return e[t]=$(e,e[t]),e.pc+=2,8}};function V(t,e){var r=128&e|e>>1;return t.f=0,0==(255&r)&&(t.f|=P),0!=(1&e)&&(t.f|=N),r}Y[32]=["SLA B",K("b")],Y[33]=["SLA C",K("c")],Y[34]=["SLA D",K("d")],Y[35]=["SLA E",K("e")],Y[36]=["SLA H",K("h")],Y[37]=["SLA L",K("l")],Y[39]=["SLA A",K("a")],Y[38]=["SLA (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,$(t,r)),t.pc+=2,16}];var G=function(t){return function(e){return e[t]=V(e,e[t]),e.pc+=2,8}};function Q(t,e){var r=e>>1;return t.f=0,0==(255&r)&&(t.f|=P),0!=(1&e)&&(t.f|=N),r}Y[40]=["SRA B",G("b")],Y[41]=["SRA C",G("c")],Y[42]=["SRA D",G("d")],Y[43]=["SRA E",G("e")],Y[44]=["SRA H",G("h")],Y[45]=["SRA L",G("l")],Y[47]=["SRA A",G("a")],Y[46]=["SRA (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,V(t,r)),t.pc+=2,16}];var tt=function(t){return function(e){return e[t]=Q(e,e[t]),e.pc+=2,8}};function et(t,e,r){var n=r&1<<e;return t.f&=-225,0==n&&(t.f|=P),t.f|=O,n}Y[56]=["SRL B",tt("b")],Y[57]=["SRL C",tt("c")],Y[58]=["SRL D",tt("d")],Y[59]=["SRL E",tt("e")],Y[60]=["SRL H",tt("h")],Y[61]=["SRL L",tt("l")],Y[63]=["SRL A",tt("a")],Y[62]=["SRL (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,Q(t,r)),t.pc+=2,16}];var rt=function(t,e){return function(r){return et(r,t,r[e]),r.pc+=2,8}};Y[64]=["BIT 0,B",rt(0,"b")],Y[65]=["BIT 0,C",rt(0,"c")],Y[66]=["BIT 0,D",rt(0,"d")],Y[67]=["BIT 0,E",rt(0,"e")],Y[68]=["BIT 0,H",rt(0,"h")],Y[69]=["BIT 0,L",rt(0,"l")],Y[71]=["BIT 0,A",rt(0,"a")],Y[72]=["BIT 1,B",rt(1,"b")],Y[73]=["BIT 1,C",rt(1,"c")],Y[74]=["BIT 1,D",rt(1,"d")],Y[75]=["BIT 1,E",rt(1,"e")],Y[76]=["BIT 1,H",rt(1,"h")],Y[77]=["BIT 1,L",rt(1,"l")],Y[79]=["BIT 1,A",rt(1,"a")],Y[80]=["BIT 2,B",rt(2,"b")],Y[81]=["BIT 2,C",rt(2,"c")],Y[82]=["BIT 2,D",rt(2,"d")],Y[83]=["BIT 2,E",rt(2,"e")],Y[84]=["BIT 2,H",rt(2,"h")],Y[85]=["BIT 2,L",rt(2,"l")],Y[87]=["BIT 2,A",rt(2,"a")],Y[88]=["BIT 3,B",rt(3,"b")],Y[89]=["BIT 3,C",rt(3,"c")],Y[90]=["BIT 3,D",rt(3,"d")],Y[91]=["BIT 3,E",rt(3,"e")],Y[92]=["BIT 3,H",rt(3,"h")],Y[93]=["BIT 3,L",rt(3,"l")],Y[95]=["BIT 3,A",rt(3,"a")],Y[96]=["BIT 4,B",rt(4,"b")],Y[97]=["BIT 4,C",rt(4,"c")],Y[98]=["BIT 4,D",rt(4,"d")],Y[99]=["BIT 4,E",rt(4,"e")],Y[100]=["BIT 4,H",rt(4,"h")],Y[101]=["BIT 4,L",rt(4,"l")],Y[103]=["BIT 4,A",rt(4,"a")],Y[104]=["BIT 5,B",rt(5,"b")],Y[105]=["BIT 5,C",rt(5,"c")],Y[106]=["BIT 5,D",rt(5,"d")],Y[107]=["BIT 5,E",rt(5,"e")],Y[108]=["BIT 5,H",rt(5,"h")],Y[109]=["BIT 5,L",rt(5,"l")],Y[111]=["BIT 5,A",rt(5,"a")],Y[112]=["BIT 6,B",rt(6,"b")],Y[113]=["BIT 6,C",rt(6,"c")],Y[114]=["BIT 6,D",rt(6,"d")],Y[115]=["BIT 6,E",rt(6,"e")],Y[116]=["BIT 6,H",rt(6,"h")],Y[117]=["BIT 6,L",rt(6,"l")],Y[119]=["BIT 6,A",rt(6,"a")],Y[120]=["BIT 7,B",rt(7,"b")],Y[121]=["BIT 7,C",rt(7,"c")],Y[122]=["BIT 7,D",rt(7,"d")],Y[123]=["BIT 7,E",rt(7,"e")],Y[124]=["BIT 7,H",rt(7,"h")],Y[125]=["BIT 7,L",rt(7,"l")],Y[127]=["BIT 7,A",rt(7,"a")];var nt=function(t){return function(e,r){return et(e,t,r.readByte(e.hl)),e.pc+=2,16}};Y[70]=["BIT 0,(HL)",nt(0)],Y[78]=["BIT 1,(HL)",nt(1)],Y[86]=["BIT 2,(HL)",nt(2)],Y[94]=["BIT 3,(HL)",nt(3)],Y[102]=["BIT 4,(HL)",nt(4)],Y[110]=["BIT 5,(HL)",nt(5)],Y[118]=["BIT 6,(HL)",nt(6)],Y[126]=["BIT 7,(HL)",nt(7)];var it=function(t,e){return function(r){return r[e]|=1<<t,r.pc+=2,8}};Y[192]=["SET 0,B",it(0,"b")],Y[193]=["SET 0,C",it(0,"c")],Y[194]=["SET 0,D",it(0,"d")],Y[195]=["SET 0,E",it(0,"e")],Y[196]=["SET 0,H",it(0,"h")],Y[197]=["SET 0,L",it(0,"l")],Y[199]=["SET 0,A",it(0,"a")],Y[200]=["SET 1,B",it(1,"b")],Y[201]=["SET 1,C",it(1,"c")],Y[202]=["SET 1,D",it(1,"d")],Y[203]=["SET 1,E",it(1,"e")],Y[204]=["SET 1,H",it(1,"h")],Y[205]=["SET 1,L",it(1,"l")],Y[207]=["SET 1,A",it(1,"a")],Y[208]=["SET 2,B",it(2,"b")],Y[209]=["SET 2,C",it(2,"c")],Y[210]=["SET 2,D",it(2,"d")],Y[211]=["SET 2,E",it(2,"e")],Y[212]=["SET 2,H",it(2,"h")],Y[213]=["SET 2,L",it(2,"l")],Y[215]=["SET 2,A",it(2,"a")],Y[216]=["SET 3,B",it(3,"b")],Y[217]=["SET 3,C",it(3,"c")],Y[218]=["SET 3,D",it(3,"d")],Y[219]=["SET 3,E",it(3,"e")],Y[220]=["SET 3,H",it(3,"h")],Y[221]=["SET 3,L",it(3,"l")],Y[223]=["SET 3,A",it(3,"a")],Y[224]=["SET 4,B",it(4,"b")],Y[225]=["SET 4,C",it(4,"c")],Y[226]=["SET 4,D",it(4,"d")],Y[227]=["SET 4,E",it(4,"e")],Y[228]=["SET 4,H",it(4,"h")],Y[229]=["SET 4,L",it(4,"l")],Y[231]=["SET 4,A",it(4,"a")],Y[232]=["SET 5,B",it(5,"b")],Y[233]=["SET 5,C",it(5,"c")],Y[234]=["SET 5,D",it(5,"d")],Y[235]=["SET 5,E",it(5,"e")],Y[236]=["SET 5,H",it(5,"h")],Y[237]=["SET 5,L",it(5,"l")],Y[239]=["SET 5,A",it(5,"a")],Y[240]=["SET 6,B",it(6,"b")],Y[241]=["SET 6,C",it(6,"c")],Y[242]=["SET 6,D",it(6,"d")],Y[243]=["SET 6,E",it(6,"e")],Y[244]=["SET 6,H",it(6,"h")],Y[245]=["SET 6,L",it(6,"l")],Y[247]=["SET 6,A",it(6,"a")],Y[248]=["SET 7,B",it(7,"b")],Y[249]=["SET 7,C",it(7,"c")],Y[250]=["SET 7,D",it(7,"d")],Y[251]=["SET 7,E",it(7,"e")],Y[252]=["SET 7,H",it(7,"h")],Y[253]=["SET 7,L",it(7,"l")],Y[255]=["SET 7,A",it(7,"a")];var at=function(t){return function(e,r){return r.writeByte(e.hl,r.readByte(e.hl)|1<<t),e.pc+=2,16}};Y[198]=["SET 0,(HL)",at(0)],Y[206]=["SET 1,(HL)",at(1)],Y[214]=["SET 2,(HL)",at(2)],Y[222]=["SET 3,(HL)",at(3)],Y[230]=["SET 4,(HL)",at(4)],Y[238]=["SET 5,(HL)",at(5)],Y[246]=["SET 6,(HL)",at(6)],Y[254]=["SET 7,(HL)",at(7)];var ct=function(t,e){return function(r){return r[e]&=~(1<<t),r.pc+=2,8}};Y[128]=["RES 0,B",ct(0,"b")],Y[129]=["RES 0,C",ct(0,"c")],Y[130]=["RES 0,D",ct(0,"d")],Y[131]=["RES 0,E",ct(0,"e")],Y[132]=["RES 0,H",ct(0,"h")],Y[133]=["RES 0,L",ct(0,"l")],Y[135]=["RES 0,A",ct(0,"a")],Y[136]=["RES 1,B",ct(1,"b")],Y[137]=["RES 1,C",ct(1,"c")],Y[138]=["RES 1,D",ct(1,"d")],Y[139]=["RES 1,E",ct(1,"e")],Y[140]=["RES 1,H",ct(1,"h")],Y[141]=["RES 1,L",ct(1,"l")],Y[143]=["RES 1,A",ct(1,"a")],Y[144]=["RES 2,B",ct(2,"b")],Y[145]=["RES 2,C",ct(2,"c")],Y[146]=["RES 2,D",ct(2,"d")],Y[147]=["RES 2,E",ct(2,"e")],Y[148]=["RES 2,H",ct(2,"h")],Y[149]=["RES 2,L",ct(2,"l")],Y[151]=["RES 2,A",ct(2,"a")],Y[152]=["RES 3,B",ct(3,"b")],Y[153]=["RES 3,C",ct(3,"c")],Y[154]=["RES 3,D",ct(3,"d")],Y[155]=["RES 3,E",ct(3,"e")],Y[156]=["RES 3,H",ct(3,"h")],Y[157]=["RES 3,L",ct(3,"l")],Y[159]=["RES 3,A",ct(3,"a")],Y[160]=["RES 4,B",ct(4,"b")],Y[161]=["RES 4,C",ct(4,"c")],Y[162]=["RES 4,D",ct(4,"d")],Y[163]=["RES 4,E",ct(4,"e")],Y[164]=["RES 4,H",ct(4,"h")],Y[165]=["RES 4,L",ct(4,"l")],Y[167]=["RES 4,A",ct(4,"a")],Y[168]=["RES 5,B",ct(5,"b")],Y[169]=["RES 5,C",ct(5,"c")],Y[170]=["RES 5,D",ct(5,"d")],Y[171]=["RES 5,E",ct(5,"e")],Y[172]=["RES 5,H",ct(5,"h")],Y[173]=["RES 5,L",ct(5,"l")],Y[175]=["RES 5,A",ct(5,"a")],Y[176]=["RES 6,B",ct(6,"b")],Y[177]=["RES 6,C",ct(6,"c")],Y[178]=["RES 6,D",ct(6,"d")],Y[179]=["RES 6,E",ct(6,"e")],Y[180]=["RES 6,H",ct(6,"h")],Y[181]=["RES 6,L",ct(6,"l")],Y[183]=["RES 6,A",ct(6,"a")],Y[184]=["RES 7,B",ct(7,"b")],Y[185]=["RES 7,C",ct(7,"c")],Y[186]=["RES 7,D",ct(7,"d")],Y[187]=["RES 7,E",ct(7,"e")],Y[188]=["RES 7,H",ct(7,"h")],Y[189]=["RES 7,L",ct(7,"l")],Y[191]=["RES 7,A",ct(7,"a")];var ot=function(t){return function(e,r){return r.writeByte(e.hl,r.readByte(e.hl)&~(1<<t)),e.pc+=2,16}};Y[134]=["RES 0,(HL)",ot(0)],Y[142]=["RES 1,(HL)",ot(1)],Y[150]=["RES 2,(HL)",ot(2)],Y[158]=["RES 3,(HL)",ot(3)],Y[166]=["RES 4,(HL)",ot(4)],Y[174]=["RES 5,(HL)",ot(5)],Y[182]=["RES 6,(HL)",ot(6)],Y[190]=["RES 7,(HL)",ot(7)];var ut=Y,st=new Array(255).fill([null,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,r){var n=r.readByte(e.pc),i="".concat(t.toString(16)).concat(n.toString(16)),a=e.pc.toString(16);throw new Error("unknown opcode 0x".concat(i,"; $").concat(a))}}()]),lt={$:st};st[203]=ut;var ht=function(t){return function(e,r){return e[t]=r.readByte(e.pc+1),e.pc+=2,8}};st[6]=["LD B,n",ht("b")],st[14]=["LD C,n",ht("c")],st[22]=["LD D,n",ht("d")],st[30]=["LD E,n",ht("e")],st[38]=["LD H,n",ht("h")],st[46]=["LD L,n",ht("l")];var ft=function(t,e){return function(r){return r[t]=r[e],r.pc+=1,4}};st[120]=["LD A,B",ft("a","b")],st[121]=["LD A,C",ft("a","c")],st[122]=["LD A,D",ft("a","d")],st[123]=["LD A,E",ft("a","e")],st[124]=["LD A,H",ft("a","h")],st[125]=["LD A,L",ft("a","l")],st[127]=["LD A,A",ft("a","a")],st[64]=["LD B,B",ft("b","b")],st[65]=["LD B,C",ft("b","c")],st[66]=["LD B,D",ft("b","d")],st[67]=["LD B,E",ft("b","e")],st[68]=["LD B,H",ft("b","h")],st[69]=["LD B,L",ft("b","l")],st[72]=["LD C,B",ft("c","b")],st[73]=["LD C,C",ft("c","c")],st[74]=["LD C,D",ft("c","d")],st[75]=["LD C,E",ft("c","e")],st[76]=["LD C,H",ft("c","h")],st[77]=["LD C,L",ft("c","l")],st[80]=["LD D,B",ft("d","b")],st[81]=["LD D,C",ft("d","c")],st[82]=["LD D,D",ft("d","d")],st[83]=["LD D,E",ft("d","e")],st[84]=["LD D,H",ft("d","h")],st[85]=["LD D,L",ft("d","l")],st[88]=["LD E,B",ft("e","b")],st[89]=["LD E,C",ft("e","c")],st[90]=["LD E,D",ft("e","d")],st[91]=["LD E,E",ft("e","e")],st[92]=["LD E,H",ft("e","h")],st[93]=["LD E,L",ft("e","l")],st[96]=["LD H,B",ft("h","b")],st[97]=["LD H,C",ft("h","c")],st[98]=["LD H,D",ft("h","d")],st[99]=["LD H,E",ft("h","e")],st[100]=["LD H,H",ft("h","h")],st[101]=["LD H,L",ft("h","l")],st[104]=["LD L,B",ft("l","b")],st[105]=["LD L,C",ft("l","c")],st[106]=["LD L,D",ft("l","d")],st[107]=["LD L,E",ft("l","e")],st[108]=["LD L,H",ft("l","h")],st[109]=["LD L,L",ft("l","l")];var dt=function(t){return function(e,r){return e[t]=r.readByte(e.hl),e.pc+=1,8}};st[70]=["LD B,(HL)",dt("b")],st[78]=["LD C,(HL)",dt("c")],st[86]=["LD D,(HL)",dt("d")],st[94]=["LD E,(HL)",dt("e")],st[102]=["LD H,(HL)",dt("h")],st[110]=["LD L,(HL)",dt("l")],st[126]=["LD A,(HL)",dt("a")];var pt=function(t){return function(e,r){return r.writeByte(e.hl,e[t]),e.pc+=1,8}};st[112]=["LD (HL),B",pt("b")],st[113]=["LD (HL),C",pt("c")],st[114]=["LD (HL),D",pt("d")],st[115]=["LD (HL),E",pt("e")],st[116]=["LD (HL),H",pt("h")],st[117]=["LD (HL),L",pt("l")],st[54]=["LD (HL),n",function(t,e){return e.writeByte(t.hl,e.readByte(t.pc+1)),t.pc+=2,12}];var vt=function(t){return function(e){return e.a=e[t],e.pc+=1,4}};st[120]=["LD A,B",vt("b")],st[121]=["LD A,C",vt("c")],st[122]=["LD A,D",vt("d")],st[123]=["LD A,E",vt("e")],st[124]=["LD A,H",vt("h")],st[125]=["LD A,L",vt("l")],st[127]=["LD A,A",vt("a")];var yt=function(t){return function(e,r){return e.a=r.readByte(e[t]),e.pc+=1,8}};st[10]=["LD A,(BC)",yt("bc")],st[26]=["LD A,(DE)",yt("de")],st[126]=["LD A,(HL)",yt("hl")],st[250]=["LD A,(nn)",function(t,e){return t.a=e.readByte(e.readWord(t.pc+1)),t.pc+=3,16}],st[62]=["LD A,n",function(t,e){return t.a=e.readByte(t.pc+1),t.pc+=2,8}];var mt=function(t){return function(e){return e[t]=e.a,e.pc+=1,4}};st[71]=["LD B,A",mt("b")],st[79]=["LD C,A",mt("c")],st[87]=["LD D,A",mt("d")],st[95]=["LD E,A",mt("e")],st[103]=["LD H,A",mt("h")],st[111]=["LD L,A",mt("l")],st[127]=["LD A,A",mt("a")];var bt=function(t){return function(e,r){return r.writeByte(e[t],e.a),e.pc+=1,8}};st[2]=["LD (BC),A",bt("bc")],st[18]=["LD (DE),A",bt("de")],st[119]=["LD (HL),A",bt("hl")],st[234]=["LD (nn),A",function(t,e){return e.writeByte(e.readWord(t.pc+1),t.a),t.pc+=3,16}],st[242]=["LD A,(C)",function(t,e){return t.a=e.readByte(65280+t.c),t.pc+=1,8}],st[226]=["LD (C),A",function(t,e){return e.writeByte(65280+t.c,t.a),t.pc+=1,8}],st[58]=["LD A,(HL-)",function(t,e){return t.a=e.readByte(t.hl--),t.pc+=1,8}],st[50]=["LD (HL-),A",function(t,e){return e.writeByte(t.hl--,t.a),t.pc+=1,8}],st[42]=["LD A,(HL+)",function(t,e){return t.a=e.readByte(t.hl++),t.pc+=1,8}],st[34]=["LD (HL+),A",function(t,e){return e.writeByte(t.hl++,t.a),t.pc+=1,8}],st[224]=["LDH (n),A",function(t,e){var r=e.readByte(t.pc+1);return e.writeByte(65280+r,t.a),t.pc+=2,12}],st[240]=["LDH A,(n)",function(t,e){var r=e.readByte(t.pc+1);return t.a=e.readByte(65280+r),t.pc+=2,12}];var Et=function(t){return function(e,r){return e[t]=r.readWord(e.pc+1),e.pc+=3,12}};function Bt(t,e){var r=e.readByte(t.pc+1).signed(),n=t.sp+r,i=t.sp^r^n;return t.f=0,0!=(16&i)&&(t.f|=O),0!=(256&i)&&(t.f|=N),n}st[1]=["LD BC,nn",Et("bc")],st[17]=["LD DE,nn",Et("de")],st[33]=["LD HL,nn",Et("hl")],st[49]=["LD SP,nn",Et("sp")],st[249]=["LD SP,HL",function(t){return t.sp=t.hl,t.pc+=1,8}],st[248]=["LD HL,SP+n",function(t,e){return t.hl=Bt(t,e),t.pc+=2,12}],st[8]=["LD (nn),SP",function(t,e){return e.writeWord(e.readWord(t.pc+1),t.sp),t.pc+=3,20}];var _t=function(t){return function(e,r){return r.writeWord(e.sp-=2,e[t]),e.pc+=1,16}};st[197]=["PUSH BC",_t("bc")],st[213]=["PUSH DE",_t("de")],st[229]=["PUSH HL",_t("hl")],st[245]=["PUSH AF",_t("af")];var wt=function(t){return function(e,r){return e[t]=r.readWord(e.sp),e.sp+=2,e.pc+=1,12}};function gt(t,e){var r=t.a+e;return t.f=0,0==(255&r)&&(t.f|=P),0!=(16&(t.a^e^r))&&(t.f|=O),0!=(256&r)&&(t.f|=N),r}st[193]=["POP BC",wt("bc")],st[209]=["POP DE",wt("de")],st[225]=["POP HL",wt("hl")],st[241]=["POP AF",wt("af")];var Lt=function(t){return function(e){return e.a=gt(e,e[t]),e.pc+=1,4}};function St(t,e){var r=t.f>>4&1,n=t.a+e+r;return t.f=0,0==(255&n)&&(t.f|=P),0!=(16&(t.a^e^n))&&(t.f|=O),0!=(256&n)&&(t.f|=N),n}st[128]=["ADD A,B",Lt("b")],st[129]=["ADD A,C",Lt("c")],st[130]=["ADD A,D",Lt("d")],st[131]=["ADD A,E",Lt("e")],st[132]=["ADD A,H",Lt("h")],st[133]=["ADD A,L",Lt("l")],st[135]=["ADD A,A",Lt("a")],st[134]=["ADD A,(HL)",function(t,e){var r=e.readByte(t.hl);return t.a=gt(t,r),t.pc+=1,8}],st[198]=["ADD A,#",function(t,e){var r=e.readByte(t.pc+1);return t.a=gt(t,r),t.pc+=2,8}];var Dt=function(t){return function(e){return e.a=St(e,e[t]),e.pc+=1,4}};function At(t,e){var r=t.a-e;return t.f=j,0==(255&r)&&(t.f|=P),0!=(16&(t.a^e^r))&&(t.f|=O),0!=(256&r)&&(t.f|=N),r}st[136]=["ADC A,B",Dt("b")],st[137]=["ADC A,C",Dt("c")],st[138]=["ADC A,D",Dt("d")],st[139]=["ADC A,E",Dt("e")],st[140]=["ADC A,H",Dt("h")],st[141]=["ADC A,L",Dt("l")],st[143]=["ADC A,A",Dt("a")],st[142]=["ADC A,(HL)",function(t,e){return t.a=St(t,e.readByte(t.hl)),t.pc+=1,8}],st[206]=["ADC A,#",function(t,e){return t.a=St(t,e.readByte(t.pc+1)),t.pc+=2,8}];var Ct=function(t){return function(e){return e.a=At(e,e[t]),e.pc+=1,4}};function Rt(t,e){var r=t.f>>4&1,n=t.a-e-r;return t.f=j,0==(255&n)&&(t.f|=P),0!=(16&(t.a^e^n))&&(t.f|=O),0!=(256&n)&&(t.f|=N),n}st[144]=["SUB B",Ct("b")],st[145]=["SUB C",Ct("c")],st[146]=["SUB D",Ct("d")],st[147]=["SUB E",Ct("e")],st[148]=["SUB H",Ct("h")],st[149]=["SUB L",Ct("l")],st[151]=["SUB A",Ct("a")],st[150]=["SUB (HL)",function(t,e){return t.a=At(t,e.readByte(t.hl)),t.pc+=1,8}],st[214]=["SUB #",function(t,e){return t.a=At(t,e.readByte(t.pc+1)),t.pc+=2,8}];var kt=function(t){return function(e){return e.a=Rt(e,e[t]),e.pc+=1,4}};function Tt(t,e){var r=t.a&e;return t.f=O,0==(255&r)&&(t.f|=P),r}st[152]=["SBC A,B",kt("b")],st[153]=["SBC A,C",kt("c")],st[154]=["SBC A,D",kt("d")],st[155]=["SBC A,E",kt("e")],st[156]=["SBC A,H",kt("h")],st[157]=["SBC A,L",kt("l")],st[159]=["SBC A,A",kt("a")],st[158]=["SBC A,(HL)",function(t,e){return t.a=Rt(t,e.readByte(t.hl)),t.pc+=1,8}],st[222]=["SBC A,#",function(t,e){return t.a=Rt(t,e.readByte(t.pc+1)),t.pc+=2,8}];var Ht=function(t){return function(e){return e.a=Tt(e,e[t]),e.pc+=1,4}};function It(t,e){var r=t.a|e;return t.f=0,0==(255&r)&&(t.f|=P),r}st[160]=["AND B",Ht("b")],st[161]=["AND C",Ht("c")],st[162]=["AND D",Ht("d")],st[163]=["AND E",Ht("e")],st[164]=["AND H",Ht("h")],st[165]=["AND L",Ht("l")],st[167]=["AND A",Ht("a")],st[166]=["AND (HL)",function(t,e){return t.a=Tt(t,e.readByte(t.hl)),t.pc+=1,8}],st[230]=["AND #",function(t,e){return t.a=Tt(t,e.readByte(t.pc+1)),t.pc+=2,8}];var Pt=function(t){return function(e){return e.a=It(e,e[t]),e.pc+=1,4}};function jt(t,e){var r=t.a^e;return t.f=0,0==(255&r)&&(t.f|=P),r}st[176]=["OR B",Pt("b")],st[177]=["OR C",Pt("c")],st[178]=["OR D",Pt("d")],st[179]=["OR E",Pt("e")],st[180]=["OR H",Pt("h")],st[181]=["OR L",Pt("l")],st[183]=["OR A",Pt("a")],st[182]=["OR (HL)",function(t,e){return t.a=It(t,e.readByte(t.hl)),t.pc+=1,4}],st[246]=["OR #",function(t,e){return t.a=It(t,e.readByte(t.pc+1)),t.pc+=2,4}];var Ot=function(t){return function(e){return e.a=jt(e,e[t]),e.pc+=1,4}};st[168]=["XOR B",Ot("b")],st[169]=["XOR C",Ot("c")],st[170]=["XOR D",Ot("d")],st[171]=["XOR E",Ot("e")],st[172]=["XOR H",Ot("h")],st[173]=["XOR L",Ot("l")],st[175]=["XOR A",Ot("a")],st[174]=["XOR (HL)",function(t,e){return t.a=jt(t,e.readByte(t.hl)),t.pc+=1,8}],st[238]=["XOR #",function(t,e){return t.a=jt(t,e.readByte(t.pc+1)),t.pc+=2,8}];var Nt=function(t){return function(e){return At(e,e[t]),e.pc+=1,4}};function Yt(t,e){var r=e+1;return t.f&=-225,0==(255&r)&&(t.f|=P),15==(15&e)&&(t.f|=O),r}st[184]=["CP B",Nt("b")],st[185]=["CP C",Nt("c")],st[186]=["CP D",Nt("d")],st[187]=["CP E",Nt("e")],st[188]=["CP H",Nt("h")],st[189]=["CP L",Nt("l")],st[191]=["CP A",Nt("a")],st[190]=["CP (HL)",function(t,e){return At(t,e.readByte(t.hl)),t.pc+=1,8}],st[254]=["CP #",function(t,e){return At(t,e.readByte(t.pc+1)),t.pc+=2,8}];var xt=function(t){return function(e){return e[t]=Yt(e,e[t]),e.pc+=1,4}};function Mt(t,e){var r=e-1;return t.f&=-225,0==(255&r)&&(t.f|=P),t.f|=j,0==(15&e)&&(t.f|=O),r}st[4]=["INC B",xt("b")],st[12]=["INC C",xt("c")],st[20]=["INC D",xt("d")],st[28]=["INC E",xt("e")],st[36]=["INC H",xt("h")],st[44]=["INC L",xt("l")],st[60]=["INC A",xt("a")],st[52]=["INC (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,Yt(t,r)),t.pc+=1,12}];var Wt=function(t){return function(e){return e[t]=Mt(e,e[t]),e.pc+=1,4}};st[5]=["DEC B",Wt("b")],st[13]=["DEC C",Wt("c")],st[21]=["DEC D",Wt("d")],st[29]=["DEC E",Wt("e")],st[37]=["DEC H",Wt("h")],st[45]=["DEC L",Wt("l")],st[61]=["DEC A",Wt("a")],st[53]=["DEC (HL)",function(t,e){var r=e.readByte(t.hl);return e.writeByte(t.hl,Mt(t,r)),t.pc+=1,12}];var Ft=function(t){return function(e,r){var n=e.hl+e[t];return e.f&=-113,0!=(4096&(e.hl^e[t]^n))&&(e.f|=O),0!=(65536&n)&&(e.f|=N),e.hl=n,e.pc+=1,8}};st[9]=["ADD HL,BC",Ft("bc")],st[25]=["ADD HL,DE",Ft("de")],st[41]=["ADD HL,HL",Ft("hl")],st[57]=["ADD HL,SP",Ft("sp")],st[232]=["ADD SP,#",function(t,e){return t.sp=Bt(t,e),t.pc+=2,16}];var Ut=function(t){return function(e){return e[t]++,e.pc+=1,8}};st[3]=["INC BC",Ut("bc")],st[19]=["INC DE",Ut("de")],st[35]=["INC HL",Ut("hl")],st[51]=["INC SP",Ut("sp")];var Jt=function(t){return function(e){return e[t]--,e.pc+=1,8}};st[11]=["DEC BC",Jt("bc")],st[27]=["DEC DE",Jt("de")],st[43]=["DEC HL",Jt("hl")],st[59]=["DEC SP",Jt("sp")],st[39]=["DAA",function(t){var e,r=0;return t.f&O&&(r|=6),t.f&N&&(r|=96),t.f&j?e=t.a-r:((15&t.a)>9&&(r|=6),t.a>153&&(r|=96),e=t.a+r),t.f&=-177,0==(255&e)&&(t.f|=P),0!=(96&r)&&(t.f|=N),t.a=e,t.pc+=1,4}],st[47]=["CPL",function(t){return t.a^=255,t.f|=96,t.pc+=1,4}],st[63]=["CCF",function(t){return t.f&=-97,t.f^=N,t.pc+=1,4}],st[55]=["SCF",function(t){return t.f&=-97,t.f|=N,t.pc+=1,4}],st[0]=["NOP",function(t){return t.pc+=1,4}],st[118]=["HALT",function(t){return t.pc+=1,4}],st[16]=["STOP",function(t){return t.pc+=2,4}],st[243]=["DI",function(t){return t.interrupt.masterInterruptSwitch=!1,t.pc+=1,4}],st[251]=["EI",function(t){return t.interrupt.masterInterruptSwitch=!0,t.pc+=1,4}],st[7]=["RLCA",function(t){var e=t.a>>7;return t.f=0,0!=e&&(t.f|=N),t.a=t.a<<1|e,t.pc+=1,4}],st[23]=["RLA",function(t){var e=t.a>>7,r=t.f>>4&1;return t.f=0,0!=e&&(t.f|=N),t.a=t.a<<1|r,t.pc+=1,4}],st[15]=["RRCA",function(t){var e=1&t.a;return t.f=0,0!=e&&(t.f|=N),t.a=t.a>>1|e<<7,t.pc+=1,4}],st[31]=["RRA",function(t){var e=1&t.a,r=t.f>>4&1;return t.f=0,0!=e&&(t.f|=N),t.a=t.a>>1|r<<7,t.pc+=1,4}],st[195]=["JP nn",function(t,e){return t.pc=e.readWord(t.pc+1),16}];var qt=function(t,e,r){return r?(t.pc=e.readWord(t.pc+1),16):(t.pc+=3,12)};st[194]=["JP NZ,nn",function(t,e){return qt(t,e,!(t.f&P))}],st[210]=["JP NC,nn",function(t,e){return qt(t,e,!(t.f&N))}],st[202]=["JP Z,nn",function(t,e){return qt(t,e,t.f&P)}],st[218]=["JP C,nn",function(t,e){return qt(t,e,t.f&N)}],st[233]=["JP (HL)",function(t){return t.pc=t.hl,4}],st[24]=["JR n",function(t,e){return t.pc+=2+e.readByte(t.pc+1).signed(),12}];var zt=function(t,e,r){return r?(t.pc+=2+e.readByte(t.pc+1).signed(),12):(t.pc+=2,8)};st[32]=["JR NZ,n",function(t,e){return zt(t,e,!(t.f&P))}],st[48]=["JR NC,n",function(t,e){return zt(t,e,!(t.f&N))}],st[40]=["JR Z,n",function(t,e){return zt(t,e,t.f&P)}],st[56]=["JR C,n",function(t,e){return zt(t,e,t.f&N)}],st[205]=["CALL nn",function(t,e){return e.writeWord(t.sp-=2,t.pc+3),t.pc=e.readWord(t.pc+1),24}];var Xt=function(t,e,r){return r?(e.writeWord(t.sp-=2,t.pc+3),t.pc=e.readWord(t.pc+1),24):(t.pc+=3,12)};st[196]=["CALL NZ,nn",function(t,e){return Xt(t,e,!(t.f&P))}],st[212]=["CALL NC,nn",function(t,e){return Xt(t,e,!(t.f&N))}],st[204]=["CALL Z,nn",function(t,e){return Xt(t,e,t.f&P)}],st[220]=["CALL C,nn",function(t,e){return Xt(t,e,t.f&N)}];var Zt=function(t){return function(e,r){return r.writeWord(e.sp-=2,e.pc+1),e.pc=t,16}};st[199]=["RST 00H",Zt(0)],st[207]=["RST 08H",Zt(8)],st[215]=["RST 10H",Zt(16)],st[223]=["RST 18H",Zt(24)],st[231]=["RST 20H",Zt(32)],st[239]=["RST 28H",Zt(40)],st[247]=["RST 30H",Zt(48)],st[255]=["RST 38H",Zt(56)],st[201]=["RET",function(t,e){return t.pc=e.readWord(t.sp),t.sp+=2,16}];var $t=function(t,e,r){return r?(t.pc=e.readWord(t.sp),t.sp+=2,20):(t.pc+=1,8)};function Kt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Vt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}st[192]=["RET NZ",function(t,e){return $t(t,e,!(t.f&P))}],st[208]=["RET NC",function(t,e){return $t(t,e,!(t.f&N))}],st[200]=["RET Z",function(t,e){return $t(t,e,t.f&P)}],st[216]=["RET C",function(t,e){return $t(t,e,t.f&N)}],st[217]=["RETI",function(t,e){return t.pc=e.readWord(t.sp),t.sp+=2,t.interrupt.masterInterruptSwitch=!0,16}],console.log(lt);var Qt=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Gt(this,"mmu",void 0),Gt(this,"timer",void 0),Gt(this,"lcd",void 0),Gt(this,"interrupt",void 0),Gt(this,"loop",void 0),Gt(this,"ime",void 0),Gt(this,"registerA",void 0),Gt(this,"registerF",void 0),Gt(this,"registerB",void 0),Gt(this,"registerC",void 0),Gt(this,"registerD",void 0),Gt(this,"registerE",void 0),Gt(this,"registerH",void 0),Gt(this,"registerL",void 0),Gt(this,"stackPointer",void 0),Gt(this,"programCounter",void 0),this.mmu=e,this.timer=r,this.lcd=n,this.loop=null,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this.registerA=0,this.registerF=0,this.registerB=0,this.registerC=0,this.registerD=0,this.registerE=0,this.registerH=0,this.registerL=0,this.stackPointer=0,this.programCounter=0}},{key:"step",value:function(){for(var t=0,e=0;t<69905;){var r=this.runCycle()+e;this.timer.step(r),this.lcd.step(r),e=this.interrupt.handleInterrupt(),t+=r}}},{key:"runCycle",value:function(){var t=this.mmu.readByte(this.programCounter),e=lt.$;203==t&&(t=this.mmu.readByte(this.programCounter+1),e=lt.$[203]);var r=Kt(e[t],2);r[0];return(0,r[1])(this,this.mmu)}},{key:"a",get:function(){return this.registerA},set:function(t){this.registerA=255&t}},{key:"f",get:function(){return this.registerF},set:function(t){this.registerF=240&t}},{key:"b",get:function(){return this.registerB},set:function(t){this.registerB=255&t}},{key:"c",get:function(){return this.registerC},set:function(t){this.registerC=255&t}},{key:"d",get:function(){return this.registerD},set:function(t){this.registerD=255&t}},{key:"e",get:function(){return this.registerE},set:function(t){this.registerE=255&t}},{key:"h",get:function(){return this.registerH},set:function(t){this.registerH=255&t}},{key:"l",get:function(){return this.registerL},set:function(t){this.registerL=255&t}},{key:"af",get:function(){return this.registerA<<8|this.registerF},set:function(t){this.a=t>>8,this.f=t}},{key:"bc",get:function(){return this.registerB<<8|this.registerC},set:function(t){this.b=t>>8,this.c=t}},{key:"de",get:function(){return this.registerD<<8|this.registerE},set:function(t){this.d=t>>8,this.e=t}},{key:"hl",get:function(){return this.registerH<<8|this.registerL},set:function(t){this.h=t>>8,this.l=t}},{key:"sp",get:function(){return this.stackPointer},set:function(t){this.stackPointer=65535&t}},{key:"pc",get:function(){return this.programCounter},set:function(t){this.programCounter=65535&t}}])&&Vt(e.prototype,r),n&&Vt(e,n),t}();r(162),r(165),r(166);function te(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ee=r(99)("gg:cart:rom-only"),re=function(){function t(e){var r,n,i;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i=void 0,(n="_rom")in(r=this)?Object.defineProperty(r,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[n]=i,this._rom=e.slice(0,32768),ee(this._rom)}var e,r,n;return e=t,(r=[{key:"readByte",value:function(t){if(t<32768)return this._rom[t];throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t){ee("writing to an unmapped address: 0x%s",t.toString(16))}}])&&te(e.prototype,r),n&&te(e,n),t}(),ne=(r(172),[308,323]),ie=327,ae=328,ce=329,oe=[206,237,102,102,204,13,0,11,3,115,0,131,0,12,0,13,0,8,17,31,136,137,0,14,220,204,110,230,221,221,217,153,187,187,103,99,110,14,236,204,221,220,153,159,187,185,51,62];function ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function se(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var le,he,fe=r(99)("gg:cart:mbc1"),de=(he=2,function(t){if(Array.isArray(t))return t}(le=[260,307])||function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done)&&(r.push(c.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw a}}return r}(le,he)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()),pe=de[0],ve=de[1];var ye=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Array(t).fill(null).map(function(t,n){var i=n*e;return i+e<=r.length?r.slice(i,i+e):new Uint8Array(e)})},me=function(t,e){return t[e&t.length-1]},be=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),se(this,"_lbank",void 0),se(this,"_hbank",void 0),se(this,"_ramEnabled",void 0),se(this,"_isMulticart",void 0),se(this,"_mode",void 0),se(this,"_rom",void 0),se(this,"_ram",void 0),this._lbank=1,this._hbank=0,this._ramEnabled=!1,this._isMulticart=function(t,e){if(64!==e)return!1;for(var r=0,n=0;n<t.length;n+=16384){for(var i=n+pe,a=t.slice(i,n+ve),c=!0,o=0;o<a.length&&(c=c&&t[i+o]==oe[o]);o++);c&&r++}return r>1}(e,r),this._mode=0,this._rom=ye(r,16384,e),this._ram=ye(n,8192)}var e,r,n;return e=t,(r=[{key:"readByte",value:function(t){switch(t>>12){case 0:case 1:case 2:case 3:var e=0;return 1==this._mode&&(e=this._isMulticart?this._hbank<<4:this._hbank<<5),me(this._rom,e)[t];case 4:case 5:case 6:case 7:var r;return r=this._isMulticart?15&this._lbank|(3&this._hbank)<<4:this._lbank|this._hbank<<5,me(this._rom,r)[16383&t];case 10:case 11:if(!this._ramEnabled)return fe("cannot read ram while disabled"),255;if(0==this._ram.length)throw new Error("cannot read ram if not created");var n=0;return 1==this._mode&&(n=this._hbank),me(this._ram,n)[8191&t]}throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){switch(t>>12){case 0:case 1:return this._ramEnabled=10==(15&e);case 2:case 3:return 0==(e&=31)&&(e=1),this._lbank=e;case 4:case 5:return this._hbank=3&e;case 6:case 7:return this._mode=1&e;case 10:case 11:if(!this._ramEnabled)return fe("cannot write ram while disabled");if(0==this._ram.length)throw new Error("cannot write ram if not created");var r=0;return 1===this._mode&&(r=this._hbank),me(this._ram,r)[8191&t]=e}throw new Error("unmapped address 0x".concat(t.toString(16)))}}])&&ue(e.prototype,r),n&&ue(e,n),t}(),Ee=function(){throw new Error("Unsupported memory type")},Be=[re,be,be,be];function _e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function we(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ge(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Le=r(99)("gg:cart"),Se=function(t,e,r){return String.fromCharCode.apply(String,ge(t.slice(e,r))).replace(/\0/g,"")},De=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),we(this,"title",void 0),we(this,"type",void 0),we(this,"romSize",void 0),we(this,"ramSize",void 0),we(this,"_memory",void 0);var r=new Uint8Array(e);this.title=Se(r,ne[0],ne[1]),this.type=r[ie],this.romSize=r[ae],this.ramSize=r[ce],Le("title: %s",this.title),Le("type: %s",this.type),Le("romSize: %d",this.romSize),Le("ramSize: %d",this.ramSize);var n,i=(n=this.type,Be[n]||Ee);this._memory=new i(r,this.romBanks,this.ramBanks)}var e,r,n;return e=t,(r=[{key:"readByte",value:function(t){return this._memory.readByte(t)}},{key:"writeByte",value:function(t,e){return this._memory.writeByte(t,e)}},{key:"typeDescription",get:function(){switch(this.type){case 0:return"ROM ONLY";case 1:return"MBC1";case 2:return"MBC1+RAM";case 3:return"MBC1+RAM+BATTERY"}return"UNKNOWN"}},{key:"romBanks",get:function(){switch(this.romSize){case 0:return 2;case 1:return 4;case 2:return 8;case 3:return 16;case 4:return 32;case 5:return 64;case 6:return 128;case 7:return 256;case 82:return 72;case 83:return 80;case 84:return 96}return 2}},{key:"ramBanks",get:function(){switch(this.ramSize){case 0:return 0;case 1:case 2:return 1;case 3:return 4;case 4:return 16;case 5:return 8}return 0}}])&&_e(e.prototype,r),n&&_e(e,n),t}();function Ae(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ce(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Re=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Ce(this,"cpu",void 0),Ce(this,"mmu",void 0),Ce(this,"masterInterruptSwitch",void 0),this.cpu=e,this.mmu=r,this.init()}var e,r,n;return e=t,(r=[{key:"init",value:function(){this.masterInterruptSwitch=!1}},{key:"handleInterrupt",value:function(){if(!this.masterInterruptSwitch)return 0;var t,e=this.cpu,r=this.mmu,n=r.ie&r.if;return 0===n?0:(1&n?(r.if&=-2,t=64):2&n?(r.if&=-3,t=72):4&n?(r.if&=-5,t=80):8&n?(r.if&=-9,t=88):16&n&&(r.if&=-17,t=96),this.masterInterruptSwitch=!1,r.writeWord(e.sp-=2,e.pc),e.pc=t,20)}},{key:"setVBlankInterrupt",value:function(){this.mmu.if|=1}},{key:"setLcdStatusInterrupt",value:function(){console.log("setLcdStatusInterrupt"),this.mmu.if|=2}},{key:"setJoypadInterrupt",value:function(){this.mmu.if|=16}},{key:"setTimerInterrupt",value:function(){console.log("setTimerInterrupt"),this.mmu.if|=4}}])&&Ae(e.prototype,r),n&&Ae(e,n),t}();function ke(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Te(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var He=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Te(this,"interrupt",void 0),Te(this,"select",void 0),Te(this,"joyp",void 0),this.select=0,this.reset()}var e,r,n;return e=t,(r=[{key:"reset",value:function(){this.joyp=[15,15]}},{key:"setJoypadInterrupt",value:function(){this.interrupt.setJoypadInterrupt()}},{key:"pressButtonB",value:function(){this.joyp[0]&=-2,this.setJoypadInterrupt()}},{key:"pressButtonA",value:function(){this.joyp[0]&=-3,this.setJoypadInterrupt()}},{key:"pressButtonSelect",value:function(){this.joyp[0]&=-5,this.setJoypadInterrupt()}},{key:"pressButtonStart",value:function(){this.joyp[0]&=-9,this.setJoypadInterrupt()}},{key:"pressButtonRight",value:function(){this.joyp[1]&=-2,this.setJoypadInterrupt()}},{key:"pressButtonLeft",value:function(){this.joyp[1]&=-3,this.setJoypadInterrupt()}},{key:"pressButtonUp",value:function(){this.joyp[1]&=-5,this.setJoypadInterrupt()}},{key:"pressButtonDown",value:function(){this.joyp[1]&=-9,this.setJoypadInterrupt()}},{key:"buttonUp",value:function(t){this.reset()}},{key:"readByte",value:function(t){if(t===v.e)return this.joyp[this.select];throw new Error("unmapped address 0x".concat(t.toString(16)))}},{key:"writeByte",value:function(t,e){if(t===v.e){switch(48&e){case 16:this.select=0;break;case 32:this.select=1}return this.joyp[this.select]}throw new Error("unmapped address 0x".concat(t.toString(16)))}}])&&ke(e.prototype,r),n&&ke(e,n),t}();function Ie(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var je=function(){function t(e){var r=e.onFrame,n=e.bios,i=void 0===n?[]:n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,"_timer",void 0),Pe(this,"_lcd",void 0),Pe(this,"_mmu",void 0),Pe(this,"_cpu",void 0),Pe(this,"_joypad",void 0),Pe(this,"useBios",void 0),Pe(this,"isRunning",void 0),Pe(this,"loop",void 0);var a=new L.a(i),c=new p,o=new I(c),u=new g(o),s=new B(a),l=new Qt(a,s,u),h=new Re(l,a),f=new He;o.frame=r,this._timer=s,this._lcd=u,this._mmu=a,this._cpu=l,this._joypad=f,l.interrupt=h,u.interrupt=h,f.interrupt=h,s.interrupt=h,a.video=c,a.timer=s,a.lcd=u,a.gpu=o,a.joypad=f,this.useBios=null!==i&&i.length>0,this.isRunning=!1,this.loop=null}var e,r,n;return e=t,(r=[{key:"loadCartridge",value:function(t){this.isRunning=!1,this.cancelAnimationFrame(),this._mmu.loadCartridge(new De(t))}},{key:"frame",value:function(){this._cpu.step()}},{key:"requestAnimationFrame",value:function(){var t=this;this.loop=h()(function e(){t.frame(),t.loop=h()(e)})}},{key:"cancelAnimationFrame",value:function(){h.a.cancel(this.loop)}},{key:"start",value:function(){this.isRunning=!0,this.init(),this.requestAnimationFrame()}},{key:"pauseResume",value:function(){this.isRunning=!this.isRunning,this.isRunning?this.requestAnimationFrame():this.cancelAnimationFrame()}},{key:"reset",value:function(){this.isRunning=!1,this.cancelAnimationFrame(),this.start()}},{key:"init",value:function(){this._timer.init(),this._lcd.init(),this._mmu.init(),this._cpu.init(),this._cpu.interrupt.init(),this.useBios||this.powerUpSequence()}},{key:"powerUpSequence",value:function(){this._cpu.pc=256,this._cpu.af=432,this._cpu.bc=19,this._cpu.de=216,this._cpu.hl=333,this._cpu.sp=65534,this._mmu.writeByte(65285,0),this._mmu.writeByte(65286,0),this._mmu.writeByte(65287,0),this._mmu.writeByte(65296,128),this._mmu.writeByte(65297,191),this._mmu.writeByte(65298,243),this._mmu.writeByte(65300,191),this._mmu.writeByte(65302,63),this._mmu.writeByte(65303,0),this._mmu.writeByte(65305,191),this._mmu.writeByte(65306,127),this._mmu.writeByte(65307,255),this._mmu.writeByte(65308,159),this._mmu.writeByte(65310,191),this._mmu.writeByte(65312,255),this._mmu.writeByte(65313,0),this._mmu.writeByte(65314,0),this._mmu.writeByte(65315,191),this._mmu.writeByte(65316,119),this._mmu.writeByte(65317,243),this._mmu.writeByte(65318,241),this._mmu.writeByte(65344,145),this._mmu.writeByte(65346,0),this._mmu.writeByte(65347,0),this._mmu.writeByte(65349,0),this._mmu.writeByte(65351,252),this._mmu.writeByte(65352,255),this._mmu.writeByte(65353,255),this._mmu.writeByte(65354,0),this._mmu.writeByte(65355,0),this._mmu.writeByte(65535,0)}},{key:"joypad",get:function(){return this._joypad}}])&&Ie(e.prototype,r),n&&Ie(e,n),t}(),Oe="gb-canvas",Ne="gb-container";r(181);function Ye(t){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Me(t,e){return!e||"object"!==Ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function We(t){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fe(t,e){return(Fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Me(this,We(e).call(this,t))).state={},r}var r,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fe(t,e)}(e,i.a.Component),r=e,(n=[{key:"componentDidMount",value:function(){var t,e,r,n,i,a=!1;function c(){a?(document.querySelector("#nes-container").style.display="none",a=!1):(document.querySelector("#nes-container").style.display="block",a=!0)}document.querySelector("#button").addEventListener("click",c),document.addEventListener("keydown",function(t){85===t.keyCode&&c()}),r=document.getElementById(Oe),n=r.getContext("2d"),i=new je({onFrame:function(t){n.drawImage(t,0,0)}}),t="./rom/Tetris (Japan) (En)(0.25Mb).gb",(e=new XMLHttpRequest).open("GET",t),e.responseType="arraybuffer",e.onerror=function(){return console.log("Error loading ".concat(t,": ").concat(e.statusText))},e.onload=function(){if(200===this.status){var t=this.response;console.log("response: ",t),i.loadCartridge(t),i.start()}else 0===this.status||e.onerror()},e.send(),s()("#input").change(function(){if(this.files.length){var t=new FileReader;t.onloadend=function(){i.loadCartridge(t.result),i.start()},t.readAsArrayBuffer(this.files[0])}}),s()("#fullscreen").click(function(){(r.requestFullscreen||r.mozRequestFullScreen||r.webkitRequestFullscreen||r.msRequestFullscreen).call(r)}),s()("#pause").click(function(){i.pauseResume()}),s()("#reset").click(function(){i.reset()}),s()("#rendering").click(function(){s()("#frame").toggleClass("pixelated")}),s()(document).keydown(function(t){var e=t.keyCode;console.log(e);var r=i.joypad;switch(e){case 87:case 38:r.pressButtonUp();break;case 83:case 40:r.pressButtonDown();break;case 65:case 37:r.pressButtonLeft();break;case 68:case 39:r.pressButtonRight();break;case 75:r.pressButtonA();break;case 74:r.pressButtonB();break;case 32:r.pressButtonSelect();break;case 13:r.pressButtonStart()}}),s()(document).keyup(function(t){t.keyCode,i.joypad.reset()}),s()("#gb-dpad-up").click(function(){i.joypad.pressButtonUp()}),s()("#gb-dpad-down").click(function(){i.joypad.pressButtonDown()}),document.querySelector("#gb-dpad-left").addEventListener("touchstart",function(){i.joypad.pressButtonLeft()}),document.querySelector("#gb-dpad-left").addEventListener("touchend",function(){i.joypad.reset()}),document.querySelector("#gb-dpad-right").addEventListener("mousedown",function(){i.joypad.pressButtonRight()}),document.querySelector("#gb-dpad-right").addEventListener("mouseup",function(){i.joypad.reset()})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{id:"nes-container",className:"v_Q"}),i.a.createElement("p",{id:"button"},"DPad: WASD",i.a.createElement("br",null),"Start: Enter, Select: space",i.a.createElement("br",null),"A Button: K",i.a.createElement("br",null),"B Button: J"),i.a.createElement("div",{id:"action-buttons"},i.a.createElement("input",{id:"input",type:"file"}),i.a.createElement("button",{id:"fullscreen"},"Fullscreen"),i.a.createElement("button",{id:"rendering"},"Rendering Mode"),i.a.createElement("button",{id:"pause"},"Pause / Resume"),i.a.createElement("button",{id:"reset"},"Reset")))}}])&&xe(r.prototype,n),a&&xe(r,a),e}();r(183);function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ze(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xe(t){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ze(t,e){return(Ze=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $e=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ze(this,Xe(e).call(this,t))).state={},r}var r,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ze(t,e)}(e,i.a.Component),r=e,(n=[{key:"render",value:function(){return i.a.createElement("div",{className:"Y_n"},i.a.createElement("div",{className:"Y_I"}),i.a.createElement("div",{className:"Y_I"}),i.a.createElement("div",{className:"Y_N"}),i.a.createElement("div",{className:"Y_A"}),i.a.createElement("div",{className:"Y_o"}),i.a.createElement("div",{className:"Y_t"}),i.a.createElement("div",{className:"Y_P"}),i.a.createElement("div",{className:"Y_Y"},i.a.createElement("div",{className:"Y_G"},i.a.createElement("div",{className:"Y_5"},i.a.createElement("div",{className:"Y_F"}),i.a.createElement("div",{className:"Y_Z"}),i.a.createElement("div",{className:"Y_F"})),i.a.createElement("div",{className:"Y_b Y_q"}),i.a.createElement("div",{className:"Y_M"}),i.a.createElement("div",{className:"Y_c"},i.a.createElement("div",{className:"Y_l"}),i.a.createElement("canvas",{id:Oe,width:"160",height:"144"}),i.a.createElement("div",{className:"Y_S"})))),i.a.createElement("div",{className:"Y_f"}),i.a.createElement("div",{className:"Y_k"},i.a.createElement("div",{className:"Y_C"}),i.a.createElement("div",{id:"gb-dpad-up",className:"Y_i"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{id:"gb-dpad-down",className:"Y_i Y_V"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{id:"gb-dpad-left",className:"Y_i Y_K"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{id:"gb-dpad-right",className:"Y_i Y_j"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null))),i.a.createElement("div",{className:"Y_s"},i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{className:"Y_y"}),i.a.createElement("div",{className:"Y_0"}),i.a.createElement("div",{className:"Y_0"}),i.a.createElement("div",{className:"Y_R"}),i.a.createElement("div",{className:"Y_8"},i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)),i.a.createElement("div",{className:"Y_x"},i.a.createElement("div",{className:"Y_A"}),i.a.createElement("div",{className:"Y_o"}),i.a.createElement("div",{className:"Y_t"}),i.a.createElement("div",{className:"Y_P"})))}}])&&qe(r.prototype,n),a&&qe(r,a),e}();function Ke(t){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ge(t,e){return!e||"object"!==Ke(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qe(t){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var er=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ge(this,Qe(e).call(this,t))).state={},r}var r,n,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(e,i.a.Component),r=e,(n=[{key:"componentDidMount",value:function(){var t=!0;document.addEventListener("keydown",function(e){85===e.keyCode&&(t?(document.getElementById(Ne).style.display="none",t=!1):(document.getElementById(Ne).style.display="block",t=!0))})}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(o,null),i.a.createElement("div",{id:Ne,style:{display:"block"}},i.a.createElement($e,null)),i.a.createElement(Ue,null))}}])&&Ve(r.prototype,n),a&&Ve(r,a),e}(),rr=(r(185),"main-page");var nr,ir=document.getElementById(rr)||((nr=document.createElement("div")).setAttribute("id",rr),document.body.appendChild(nr),nr);c.a.render(i.a.createElement(er,null),ir)},176:function(t,e){t.exports={"nav-bar":"p_v","nav-header":"p_4"}},181:function(t,e){t.exports={"nes-container":"v_Q","nes-canvas":"v_r",pixelated:"v_H","action-buttons":"v_w"}},183:function(t,e){t.exports={gameboy:"Y_n","header-v":"Y_I","header-h":"Y_N","header-circle":"Y_A","footer-circle":"Y_x","v-bit":"Y_o","v-bit2":"Y_t","v-bit3":"Y_P","screen-outer":"Y_Y","screen-inner":"Y_G","screen-display":"Y_c","screen-tetris":"Y_l","screen-display-triangle":"Y_S","screen-top":"Y_5","screen-top-purple":"Y_F","screen-top-text":"Y_Z","screen-left-text":"Y_M","screen-circle":"Y_b","screen-on":"Y_q",text:"Y_f",dpad:"Y_k","dpad-center":"Y_C","dpad-top":"Y_i","dpad-bottom":"Y_V","dpad-left":"Y_K","dpad-right":"Y_j","button-container":"Y_s","button-text":"Y_y","start-button":"Y_0","bottom-right-shadow":"Y_R","bottom-right":"Y_8"}},185:function(t,e){}})});